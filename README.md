# Gerenciador Financeiro

Um aplicativo web single-page para gerenciamento financeiro pessoal, desenvolvido em HTML, CSS e JavaScript puro, com **Supabase** como backend de dados.

## ğŸ“‹ Funcionalidades

- **Receitas**: Registre todas as suas entradas de dinheiro
- **Contas Fixas**: Controle despesas recorrentes (aluguel, internet, etc.)
- **Contas VariÃ¡veis**: Acompanhe gastos nÃ£o previstos
- **CartÃµes de CrÃ©dito**: Gerencie faturas e compras no cartÃ£o
- **Dashboard Anual**: Visualize receitas e despesas por mÃªs
- **Tema Claro/Escuro**: Personalize a aparÃªncia do app

## ğŸš€ InstalaÃ§Ã£o RÃ¡pida

### 1. Clone o repositÃ³rio

```bash
git clone https://github.com/rodrigocardosopires/gerenciador-financeiro.git
cd gerenciador-financeiro
```

### 2. Configure as credenciais do Supabase

```bash
# Copie o arquivo de exemplo
cp js/config.example.js js/config.js

# Edite com suas credenciais
# Abra js/config.js e insira sua SUPABASE_URL e SUPABASE_ANON_KEY
```

### 3. Execute o projeto

```bash
npx serve
# Acesse: http://localhost:3000
```

## ğŸ”§ ConfiguraÃ§Ã£o do Supabase

### Criar um Projeto

1. Acesse [https://supabase.com](https://supabase.com) e crie uma conta
2. Clique em **"New Project"**
3. Preencha os dados e aguarde a criaÃ§Ã£o (~2 min)

### Habilitar AutenticaÃ§Ã£o por E-mail

1. No Supabase, vÃ¡ em **Authentication > Providers**
2. Verifique se **Email** estÃ¡ habilitado
3. Em **Authentication > URL Configuration**, configure:
   - **Site URL**: `http://localhost:3000` (desenvolvimento)
   - **Redirect URLs**: Adicione `http://localhost:3000/index.html`

### Criar as Tabelas

No **SQL Editor** do Supabase, execute:

```sql
-- =====================================================
-- SCRIPT DE CRIAÃ‡ÃƒO DE TABELAS
-- Gerenciador Financeiro com AutenticaÃ§Ã£o
-- =====================================================

-- Tabela principal de transaÃ§Ãµes (com user_id para RLS)
create table if not exists public.transactions (
  id bigint generated by default as identity primary key,
  created_at timestamp with time zone default timezone('utc'::text, now()) not null,
  user_id uuid references auth.users(id) on delete cascade not null default auth.uid(),
  tab_key text not null,
  date date not null,
  description text not null,
  category text,
  amount numeric(14, 2) not null
);

-- Ãndices para performance
create index if not exists idx_transactions_user_id on public.transactions(user_id);
create index if not exists idx_transactions_tab_key on public.transactions(tab_key);
create index if not exists idx_transactions_date on public.transactions(date);

-- Habilitar Row Level Security
alter table public.transactions enable row level security;

-- Remover polÃ­ticas antigas (se existirem)
drop policy if exists "Permitir acesso pÃºblico" on public.transactions;
drop policy if exists "Users can view own transactions" on public.transactions;
drop policy if exists "Users can insert own transactions" on public.transactions;
drop policy if exists "Users can update own transactions" on public.transactions;
drop policy if exists "Users can delete own transactions" on public.transactions;

-- PolÃ­ticas de seguranÃ§a por usuÃ¡rio (RLS)
-- Cada usuÃ¡rio sÃ³ pode ver/editar suas prÃ³prias transaÃ§Ãµes

create policy "Users can view own transactions"
  on public.transactions for select
  using (auth.uid() = user_id);

create policy "Users can insert own transactions"
  on public.transactions for insert
  with check (auth.uid() = user_id);

create policy "Users can update own transactions"
  on public.transactions for update
  using (auth.uid() = user_id);

create policy "Users can delete own transactions"
  on public.transactions for delete
  using (auth.uid() = user_id);

-- =====================================================
-- SCRIPT DE MIGRAÃ‡ÃƒO (se jÃ¡ tiver dados)
-- Execute apenas se precisar migrar dados existentes
-- =====================================================

-- Para adicionar user_id a uma tabela existente:
-- alter table public.transactions 
--   add column if not exists user_id uuid references auth.users(id);

-- Para associar dados existentes a um usuÃ¡rio especÃ­fico:
-- update public.transactions 
--   set user_id = 'SEU_USER_ID_AQUI' 
--   where user_id is null;

-- Depois, tornar user_id obrigatÃ³rio:
-- alter table public.transactions 
--   alter column user_id set not null,
--   alter column user_id set default auth.uid();
```

> âš ï¸ **IMPORTANTE**: O Supabase Auth jÃ¡ criptografa as senhas automaticamente usando **bcrypt**. NÃ£o Ã© necessÃ¡rio implementar criptografia manual.

### Obter as Credenciais

1. No Supabase, vÃ¡ em **Project Settings > API**
2. Copie:
   - **Project URL**: `https://xxxxx.supabase.co`
   - **anon public key**: `eyJ...`

### Configurar no Projeto

Edite o arquivo `js/config.js`:

```javascript
export const config = {
  SUPABASE_URL: 'https://seu-projeto.supabase.co',
  SUPABASE_ANON_KEY: 'sua-anon-key-aqui'
};
```

> âš ï¸ **IMPORTANTE**: O arquivo `js/config.js` estÃ¡ no `.gitignore` e **nÃ£o serÃ¡ commitado**. Isso protege suas credenciais!

## ğŸ“ Estrutura do Projeto

```
gerenciador-financeiro/
â”œâ”€â”€ index.html              # PÃ¡gina principal (requer login)
â”œâ”€â”€ login.html              # PÃ¡gina de autenticaÃ§Ã£o
â”œâ”€â”€ css/
â”‚   â””â”€â”€ styles.css          # Estilos (temas, responsivo, auth)
â”œâ”€â”€ js/
â”‚   â”œâ”€â”€ config.example.js   # Exemplo de configuraÃ§Ã£o (commitado)
â”‚   â”œâ”€â”€ config.js           # Suas credenciais (NÃƒO commitado)
â”‚   â”œâ”€â”€ supabaseClient.js   # Cliente Supabase
â”‚   â”œâ”€â”€ auth.js             # MÃ³dulo de autenticaÃ§Ã£o
â”‚   â””â”€â”€ app.js              # LÃ³gica da aplicaÃ§Ã£o
â”œâ”€â”€ .gitignore              # Arquivos ignorados pelo git
â””â”€â”€ README.md               # Este arquivo
```

## ğŸ–¥ï¸ OpÃ§Ãµes para Rodar Localmente

| MÃ©todo | Comando |
|--------|---------|
| npx serve | `npx serve` |
| Python | `python -m http.server 3000` |
| VS Code | ExtensÃ£o Live Server |

## ğŸ” SeguranÃ§a

- âœ… Credenciais em arquivo separado (`config.js`)
- âœ… Arquivo de credenciais no `.gitignore`
- âœ… Apenas `anon key` exposta (segura para frontend)
- âš ï¸ Em produÃ§Ã£o, implemente autenticaÃ§Ã£o de usuÃ¡rio

## ğŸ› SoluÃ§Ã£o de Problemas

| Problema | SoluÃ§Ã£o |
|----------|---------|
| "Failed to fetch" | Verifique as credenciais em `config.js` |
| CORS errors | Use servidor local (nÃ£o abra o HTML direto) |
| Dados nÃ£o aparecem | Verifique se as tabelas foram criadas |

## ğŸ“ LicenÃ§a

MIT - Use livremente para fins pessoais e comerciais.

---

Desenvolvido com â¤ï¸ usando HTML, CSS, JavaScript e Supabase
